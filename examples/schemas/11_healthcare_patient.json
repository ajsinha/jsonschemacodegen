{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "healthcare_patient.json",
  "title": "Patient",
  "description": "Healthcare patient record",
  "type": "object",
  "definitions": {
    "Name": {
      "type": "object",
      "properties": {
        "given": { "type": "array", "items": { "type": "string" } },
        "family": { "type": "string" },
        "prefix": { "type": "string" },
        "suffix": { "type": "string" }
      },
      "required": ["family"]
    },
    "ContactPoint": {
      "type": "object",
      "properties": {
        "system": { "type": "string", "enum": ["phone", "email", "fax", "url"] },
        "value": { "type": "string" },
        "use": { "type": "string", "enum": ["home", "work", "mobile"] },
        "rank": { "type": "integer", "minimum": 1 }
      },
      "required": ["system", "value"]
    },
    "Address": {
      "type": "object",
      "properties": {
        "use": { "type": "string", "enum": ["home", "work", "temp", "billing"] },
        "line": { "type": "array", "items": { "type": "string" } },
        "city": { "type": "string" },
        "state": { "type": "string" },
        "postalCode": { "type": "string" },
        "country": { "type": "string" }
      }
    },
    "Identifier": {
      "type": "object",
      "properties": {
        "system": { "type": "string", "format": "uri" },
        "value": { "type": "string" },
        "type": { "type": "string" }
      },
      "required": ["value"]
    },
    "EmergencyContact": {
      "type": "object",
      "properties": {
        "relationship": { "type": "string" },
        "name": { "$ref": "#/definitions/Name" },
        "telecom": { "type": "array", "items": { "$ref": "#/definitions/ContactPoint" } },
        "address": { "$ref": "#/definitions/Address" }
      }
    },
    "Insurance": {
      "type": "object",
      "properties": {
        "provider": { "type": "string" },
        "policyNumber": { "type": "string" },
        "groupNumber": { "type": "string" },
        "subscriberId": { "type": "string" },
        "effectiveDate": { "type": "string", "format": "date" },
        "expirationDate": { "type": "string", "format": "date" }
      },
      "required": ["provider", "policyNumber"]
    }
  },
  "properties": {
    "id": { "type": "string", "format": "uuid" },
    "identifiers": { "type": "array", "items": { "$ref": "#/definitions/Identifier" } },
    "active": { "type": "boolean", "default": true },
    "name": { "type": "array", "items": { "$ref": "#/definitions/Name" } },
    "telecom": { "type": "array", "items": { "$ref": "#/definitions/ContactPoint" } },
    "gender": { "type": "string", "enum": ["male", "female", "other", "unknown"] },
    "birthDate": { "type": "string", "format": "date" },
    "deceasedBoolean": { "type": "boolean" },
    "deceasedDateTime": { "type": "string", "format": "date-time" },
    "address": { "type": "array", "items": { "$ref": "#/definitions/Address" } },
    "maritalStatus": { "type": "string", "enum": ["single", "married", "divorced", "widowed"] },
    "emergencyContacts": { "type": "array", "items": { "$ref": "#/definitions/EmergencyContact" } },
    "insurance": { "type": "array", "items": { "$ref": "#/definitions/Insurance" } },
    "generalPractitioner": { "type": "string" },
    "preferredLanguage": { "type": "string" },
    "createdAt": { "type": "string", "format": "date-time" },
    "updatedAt": { "type": "string", "format": "date-time" }
  },
  "required": ["id", "name", "birthDate"]
}
